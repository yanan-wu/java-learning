
##### 可见性
- 加锁可以保证可见性与原子性；volatile 变量只能保证可见性。
- volatile 变量使用条件：
1. 写入变量时，并不依赖变量的当前值；或者能够确保只有单一的线程修改变量的值；
2. 变量不需要与其他的状态变量共同参与不变约束；
3. 访问变量时，没有其他的原因需要加锁。

##### 线程封闭
数据仅在单线程中被访问，不共享数据。典型应用，池化技术，JDBC 连接池。

##### 并发容器
- ConcurrentHashMap 使用更细化的锁机制，分离锁。返回的迭代器具有弱一致性。
- CopyOnWriteArrayList 是同步列表的并发替代品。

##### 阻塞队列
BlockingQueue 典型应用，生产者-消费者模式；线程安全。
BlockingDeque 双端队列，窃取工作模式。

##### Synchronizer 对象
- latch 闭锁。可以延迟线程的进度直到线程到达终止状态。可以用来确保特定活动直到其他的活动完成后才发生。
1. CountDownLatch 是一个灵活的闭锁实现。
2. FutureTask 也可以作为闭锁。
- Semaphore 信号量。计数信号量用来控制能够同时访问某特定资源的活动的数量，或者同时执行某一给定操作的数量。典型应用：资源池。
- barrier 关卡。所有线程必须同时到达关卡点，才能继续处理。

##### 精灵线程（守护线程）
JVM 启动的时创建的所有线程，除了主线程外，其他的都是精灵线程。当 JVM 停止时，所有存在的精灵线程都会被抛弃，JVM 直接退出。


##### 测试
测试的目标不是更多地发现错误，而是提高信心，相信代码能够如期运行。


